<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Monitor Jurídico – SURET</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f4f6f8;
}

header {
    background: #003A8F;
    color: white;
    padding: 15px 20px;
    font-size: 20px;
    font-weight: bold;
}

.controls {
    background: white;
    padding: 15px;
    display: flex;
    gap: 10px;
    align-items: center;
    border-bottom: 1px solid #ddd;
}

button {
    background: #003A8F;
    color: white;
    border: none;
    padding: 8px 15px;
    cursor: pointer;
}

.container {
    padding: 20px;
}

.card {
    background: white;
    padding: 15px;
    margin-bottom: 10px;
    border-left: 5px solid #003A8F;
}

.card a {
    text-decoration: none;
    color: #003A8F;
    font-weight: bold;
}
</style>
</head>
<body>

<header>Monitor Jurídico – SURET</header>

<div class="controls">
    Data inicial:
    <input type="date" id="startDate">
    Data final:
    <input type="date" id="endDate">
    <button onclick="loadNews()">Atualizar</button>
</div>

<div class="container" id="news"></div>

<script>
const feeds = [
"https://api.rss2json.com/v1/api.json?rss_url=https://www.migalhas.com.br/rss",
"https://api.rss2json.com/v1/api.json?rss_url=https://www.conjur.com.br/rss.xml",
"https://api.rss2json.com/v1/api.json?rss_url=https://g1.globo.com/rss/g1/economia/",
"https://api.rss2json.com/v1/api.json?rss_url=https://www.stf.jus.br/portal/rss/noticiaRss.asp",
"https://api.rss2json.com/v1/api.json?rss_url=https://www.stj.jus.br/sites/portalp/rss/noticias.xml"
];

async function loadNews() {
    const container = document.getElementById("news");
    container.innerHTML = "Carregando...";

    const start = document.getElementById("startDate").value;
    const end = document.getElementById("endDate").value;

    let allNews = [];

    for (let feed of feeds) {
        try {
            const res = await fetch(feed);
            const data = await res.json();
            allNews = allNews.concat(data.items);
        } catch (e) {
            console.log("Erro no feed:", feed);
        }
    }

    if (start || end) {
        allNews = allNews.filter(item => {
            const date = new Date(item.pubDate);
            if (start && date < new Date(start)) return false;
            if (end && date > new Date(end)) return false;
            return true;
        });
    }

    allNews.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));

    container.innerHTML = "";

    allNews.slice(0, 50).forEach(item => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `
            <div>${new Date(item.pubDate).toLocaleDateString()}</div>
            <a href="${item.link}" target="_blank">${item.title}</a>
        `;
        container.appendChild(div);
    });
}

loadNews();
</script>

</body>
</html>
